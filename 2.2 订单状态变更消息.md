[**首页**](https://open-qa1.dwbops.com/) /


- <a href="#基本信息">基本信息</a>
- <a href="#请求参数">请求参数</a>
- <a href="#响应参数">响应参数</a>
- <a href="#接口错误码">接口错误码</a>
- <a href="#附录">附录</a>


# 2.2 订单状态变更消息

#### 基本信息
```
type：dianwoda.order.status-update

接口描述：点我达订单状态发生变更时，通过此接口发起回调。
```

#### 请求参数
字段名 | 类型 | 是否必须 | 示例 | 描述
---|---|---|---|---
order\_original\_id|String|是|"FTP201511091198"|商户订单编号，派发订单接口中的order_original_id值
order\_status|String|是|"dispatched"|订单状态，枚举详见附录1
cancel\_reason|String|否|"用户联系方式错了"|订单取消原因
cancel\_code|String|否|"complete\_time\_out"|取消原因码，枚举详见附录2
abnormal\_reason|String|否|"联系不到用户"|异常订单原因
abnormal\_code|String|否|"can\_not\_be\_reached"|异常原因码，枚举详见附录3
complete\_reason|String|否|"邻居代收"|妥投类型
rider\_code|String|否|"10088"|配送员编号
rider\_name|String|否|"张德顺"|配送员姓名
rider\_mobile|String|否|"13600000000"|配送员手机号
time\_status\_update|Long|是|1429861697905|配送状态更新时间戳，毫秒级unix-timestamp


```javascript
消息示例：
{
	"content":{
		"order_original_id":"FTP201511091198",
		"order_status":"completed",
		"rider_code":"10088",
		"rider_name":"张德顺",
		"rider_mobile":"13600000000",
		"time_status_update":1429861697905
	},
	"deliver_times":1,
	"msg_id":"67798ea556724ee499b3aa65a3274047",
	"pub_time":1545188246307
}
```

#### 接口错误码
无
#### 附录
**1、订单状态码**

状态码 | 状态名 | 订单状态备注 |
---|---|---
created|已下单|派单中；商家已下单成功，系统派单中
switched|已转单|骑手发起转单后，订单回到待派订单池状态
dispatched|已接单|取餐中；骑手已接单
arrived|已到店|备餐中；骑手已到店，等待商家出餐
obtained|已离店|配送中；骑手已离店，配送途中
completed|已完成（完结）|骑手已妥投，订单完成配送
abnormal|异常（完结）|订单出现异常，由于客户原因等骑手无法正常完成，操作异常完结
canceled|已取消（完结）|订单已取消
**2、订单取消原因**

取消码（cancel_code）|取消原因（cancel_reason）|描述
---|---|---
rider_at_merchant_request|商家要求取消|骑手在APP上发起，选择因商家原因，取消订单
platform_for_dispatch_timeout|派单超时|订单派单超出配置时间
platform_for_arrive_timeout|系统取消（长时间未到店）|订单处于已发单状态超过配置时间
platform_for_obtain_timeout|系统取消（长时间未离店）|订单处于配送中状态超过配置时间
platform_for_complete_timeout|系统标记为问题单（长时间未完成）|订单整体配送时间超时
customerservice_at_merchant_request|商家要求客服取消|客服侧选择商家原因取消
other|其他|系统检测或其他特殊存入原因
**3、异常订单原因**

异常码（abnormal_code）|异常原因（abnormal_reason）|描述
---|---|---
customer\_reject|客户拒收|送达环节，客户拒收
customer_not_connectable|联系不到客户|配送环节，联系不到客户
other|其他|系统检测或其他特殊存入原因




